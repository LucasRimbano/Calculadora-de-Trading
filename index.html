<!-- filepath: investment-calculator/index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ğŸ’¸ Datos a ingresar: | ğŸ“ˆ GrÃ¡fico TradingView</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1 style="text-align:center; margin-top:32px;">ğŸ’¸Calculadora de InversiÃ³n de pÃ©rdidas/ganancias ğŸ“Š</h1>
  <div class="main-wrapper">
    <div class="container">
      <h2>ğŸ’¸ Calculadora de InversiÃ³n</h2>
      <label for="entrada">ğŸ”½ Precio de entrada:</label>
      <input type="number" id="entrada" step="0.01">

      <label for="salida">ğŸ”¼ Precio de salida:</label>
      <input type="number" id="salida" step="0.01">

      <label for="posicion">ğŸ’µ PosiciÃ³n en dÃ³lares:</label>
      <input type="number" id="posicion" step="0.01">

      <button onclick="calcular()">ğŸ§® Calcular</button>
      <div id="resultado"></div>
    </div>
    <div class="chart-wrapper">
      <h3>ğŸ“Š GrÃ¡fico de TradingView</h3>
      <div class="tradingview-widget-container">
        <div id="tradingview_12345"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
        <script type="text/javascript">
          new TradingView.widget({
            "width": 600,
            "height": 400,
            "symbol": "NASDAQ:AAPL", // Cambia el sÃ­mbolo por el que quieras mostrar
            "interval": "D",
            "timezone": "Etc/UTC",
            "theme": "light",
            "style": "1",
            "locale": "es",
            "toolbar_bg": "#f1f3f6",
            "enable_publishing": false,
            "allow_symbol_change": true,
            "container_id": "tradingview_12345"
          });
        </script>
      </div>
    </div>
  </div>
  <script>
    function calcular() {
      const entrada = parseFloat(document.getElementById("entrada").value);
      const salida = parseFloat(document.getElementById("salida").value);
      const posicion = parseFloat(document.getElementById("posicion").value);

      const unidades = posicion / entrada;
      const valorFinal = unidades * salida;
      const ganancia = valorFinal - posicion;
      const roi = (ganancia / posicion) * 100;

      let mensaje = "";
      if (roi > 0) {
        mensaje = "âœ… Ganancia realizada";
      } else if (roi === 0) {
        mensaje = "ğŸ”„ Precio de entrada realizado";
      } else {
        mensaje = "âŒ PÃ©rdida realizada";
      }

      const resultadoHTML = `
        <h4 style="margin-bottom:10px;">${mensaje}</h4>
        <p>ğŸ”¢ Unidades compradas: ${unidades.toFixed(2)}</p>
        <p>ğŸ’° Valor final: $${valorFinal.toFixed(2)}</p>
        <p>${ganancia >= 0 ? "ğŸ“ˆ" : "ğŸ“‰"} Ganancia/PÃ©rdida: $${ganancia.toFixed(2)}</p>
        <p>ğŸ“Š ROI: ${roi.toFixed(2)}%</p>
      `;
      document.getElementById("resultado").innerHTML = resultadoHTML;
    }
  </script>